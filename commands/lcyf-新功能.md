# /lcyf-新功能

## 概述

完整的新功能开发流程，从需求分析到代码交付。

## 用法

```
/lcyf-新功能 <功能描述>
/lcyf-新功能 添加用户导出功能
/lcyf-新功能 实现订单取消流程
```

## 执行流程

```
1. 需求分析
   └── 01-规划专家: 理解需求，拆分任务

2. 架构设计
   └── 02-架构专家: 确定技术方案

3. TDD开发
   └── 07-测试专家: 编写测试
   └── 03-Java开发专家: 实现代码

4. 代码审查
   └── 05-代码审查专家: 质量检查
   └── 06-安全审查专家: 安全扫描

5. 知识沉淀
   └── 08-学习代理: 提取可复用模式
```

## 阶段详情

### 阶段1: 需求分析

**执行Agent**: 01-规划专家

**输出**:
- 任务分解清单
- 依赖关系图
- 风险评估

**示例输出**:
```markdown
## 任务计划: 用户导出功能

### 概述
- 目标: 实现用户列表的Excel导出
- 预计任务: 5个子任务
- 模块: system

### 任务分解
1. [ ] 创建导出DTO
2. [ ] 实现导出Service方法
3. [ ] 添加导出Controller接口
4. [ ] 编写单元测试
5. [ ] 添加导出权限

### 依赖关系
- 任务3依赖任务2
- 任务4依赖任务2
```

### 阶段2: 架构设计

**执行Agent**: 02-架构专家

**检查项**:
- [ ] 符合模块边界
- [ ] 符合分层架构
- [ ] 无循环依赖

### 阶段3: TDD开发

**执行Agent**: 07-测试专家 + 03-Java开发专家

**工作流**:
```
红灯 → 编写测试 → 测试失败
绿灯 → 实现代码 → 测试通过
重构 → 优化代码 → 保持通过
```

**覆盖率要求**: ≥80%

### 阶段4: 代码审查

**执行Agent**: 05-代码审查专家 + 06-安全审查专家

**检查项**:
- 代码规范
- 性能问题
- 安全漏洞

### 阶段5: 知识沉淀

**执行Agent**: 08-学习代理

**学习内容**:
- 可复用的代码模式
- 问题解决方案
- 最佳实践

## 参数

| 参数 | 说明 | 示例 |
|------|------|------|
| 功能描述 | 要实现的功能 | 添加用户导出功能 |
| --module | 指定模块 | --module system |
| --skip-test | 跳过测试（不推荐） | --skip-test |

## 关联命令

- `/lcyf-tdd` - 单独使用TDD开发
- `/lcyf-代码审查` - 单独执行代码审查
- `/lcyf-验证` - 执行验证

## 关联Agent

- 01-规划专家
- 02-架构专家
- 03-Java开发专家
- 05-代码审查专家
- 06-安全审查专家
- 07-测试专家
- 08-学习代理

## 关联规则

- 00-总则
- 03-测试要求
- 06-Java编码规范
