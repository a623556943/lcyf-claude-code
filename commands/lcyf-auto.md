---
description: 自动化工作流：需求分析 → 实施计划确认 → 代码开发。一键完成需求到代码的全流程。
---

# /lcyf-auto 命令

自动化工作流命令，一键完成从**需求分析** → **计划评估** → **代码开发**的完整流程。

## 用法

```bash
# 基础用法
/lcyf-auto 实现用户导出功能

# 指定模块
/lcyf-auto 添加订单支付接口 --module finance

# 只生成计划不开发
/lcyf-auto 优化查询性能 --plan-only
```

## 工作流程

### 自动化步骤

1. **需求分析** (planner 代理)
   - 重述需求，确保理解一致
   - 分解实施阶段，标识依赖关系
   - 评估风险、复杂度和工作量
   - 等待用户确认

2. **计划确认** (用户交互)
   - 审核计划内容
   - 支持修改或重新规划
   - 确认后自动开始开发

3. **代码开发** (java-developer 代理)
   - 根据计划实施功能
   - 生成相关代码（Controller/Service/Mapper/DTO）
   - 进行代码审查和安全检查
   - 提交 Git Commit

## 参数说明

| 参数 | 说明 | 示例 |
|------|------|------|
| 需求描述 | 要实现的功能/需求 | "实现用户批量导出" |
| --module | 指定业务模块 | system, sales, finance, policy |
| --plan-only | 仅生成计划，不开发 | 不需要值 |
| --skip-plan | 跳过规划，直接开发 | 不需要值 |

## 何时使用

### ✅ 适合使用 /lcyf-auto

- 新功能开发
- 复杂需求实现
- 跨模块功能开发
- 需要规划的任务

### ❌ 不适合使用 /lcyf-auto

- 简单 Bug 修复（用 `/lcyf-java-developer`）
- 只需要代码审查
- 仅更新文档

## 工作流示例

```
用户：/lcyf-auto 添加保单导出为 Excel 功能 --module policy

系统执行：
├─ 1️⃣ 调用 planner（需求分析）
│  ├─ 重述需求：导出保单数据到 Excel
│  ├─ 分解阶段：
│  │  ├─ 阶段1：DTO/Query 定义（lcyf-module-base）
│  │  ├─ 阶段2：Service 实现导出逻辑
│  │  ├─ 阶段3：Controller 添加导出接口
│  ├─ 评估风险：大文件处理、并发导出
│  └─ 等待用户确认 ✋

用户：是，继续执行

├─ 2️⃣ 调用 java-developer（代码实施）
│  ├─ 创建导出 Query 和 DTO（lcyf-module-base）
│  ├─ 实现导出 Service（lcyf-module-policy-biz）
│  ├─ 创建导出 Controller（lcyf-module-policy-adapter）

✅ 完成：新功能已开发
```

## 高级选项

### 仅规划，不开发

```bash
/lcyf-auto 实现订单回调机制 --plan-only
```

用于：
- 获取规划建议
- 评估工作量
- 团队评审

### 跳过规划，直接开发

```bash
/lcyf-auto 修复多租户过滤 --skip-plan
```

用于：
- 简单任务
- 已明确需求
- 加快开发速度

## 相关命令

| 命令 | 用途 |
|------|------|
| `/lcyf-plan` | 单独进行需求规划（不开发） |
| `/lcyf-java-developer` | 单独进行代码开发（跳过规划） |

## 常见问题

### Q: 计划确认前可以修改吗？

**A**: 可以。在 "确认/是/继续" 前，可以：
- 修改：[具体建议]
- 换个方案：[替代方案]
- 重新规划：从头开始

### Q: 如何处理计划不满意的情况？

**A**: 回复修改意见，planner 将重新规划。可以多次迭代。

### Q: 开发过程中可以修改计划吗？

**A**: 可以。告诉系统修改内容，开发会相应调整。

## 最佳实践

✅ **推荐做法**
- 提供清晰的需求描述
- 指定相关的业务模块
- 审核生成的计划
- 在计划确认前沟通修改意见

❌ **避免做法**
- 模糊的需求描述（如："做一个功能"）
- 跳过计划审核直接开发
- 开发中频繁改变需求

## 技术细节

此命令调用的代理：
- **planner**: 需求分析和计划生成 (`~/.claude/agents/planner.md`)
- **java-developer**: 代码实施 (`~/.claude/agents/java-developer.md`)

遵循的规范：
- **01-Java开发规范** - 编码标准
- **02-API设计规范** - API 设计
- **03-Git工作流** - 提交和分支管理
