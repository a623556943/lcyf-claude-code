# 安装指南

## 系统要求

| 组件 | 要求 |
|------|------|
| Claude Code CLI | 最新版本 |
| Git | 2.0+ |
| Java | 17+ |
| Maven | 3.8+ |

---

## 安装步骤

### 1. 进入项目目录

```bash
cd /path/to/your/java/project
```

### 2. 克隆配置

```bash
git clone https://github.com/a623556943/lcyf-claude-code.git .claude
```

### 3. 验证安装

检查目录结构：

```bash
ls -la .claude/
# 应该包含:
# - agents/              # Agent 定义
# - commands/            # 智能命令
# - rules/               # 编码规范
# - skills/              # 业务技能（80+ 个）
# - docs/                # 文档
# - hooks/               # 自动化钩子
# - mcp-configs/         # MCP 配置
# - .claude-skills-config.json  # Skills 注册配置
# - CLAUDE.md            # 主配置
```

---

## 完整目录结构

安装后的项目目录：

```
your-project/
├── .claude/                        # lcyf-claude-code 配置目录
│   ├── agents/                     # 3 个 Agent 定义
│   │   ├── planner.md              # 规划专家
│   │   ├── java-developer.md       # Java 开发专家
│   │   └── code-reviewer.md        # 代码审查专家
│   ├── commands/                   # 3 个智能命令
│   │   ├── lcyf-auto.md            # 自动化工作流
│   │   ├── lcyf-plan.md            # 规划命令
│   │   └── lcyf-java-developer.md  # 开发命令
│   ├── rules/                      # 5 条编码规范
│   │   ├── 00-总则.md
│   │   ├── 01-Java开发规范.md
│   │   ├── 02-API设计规范.md
│   │   ├── 03-Git工作流.md
│   │   └── 05-Skills加载工作流.md  # [强制] Skills 使用规则
│   ├── skills/                     # 80+ 个业务领域技能
│   │   ├── java-full-stack/        # Java 全栈技能
│   │   ├── modular-monolith/       # 模块化单体架构
│   │   ├── system-*/               # 系统模块技能（20+）
│   │   ├── finance-*/              # 财务模块技能（30+）
│   │   ├── product-*/              # 产品模块技能（20+）
│   │   └── policy-*/               # 保单模块技能（10+）
│   ├── docs/                       # 文档
│   │   ├── 快速开始.md
│   │   ├── 安装指南.md
│   │   ├── 项目级配置说明.md
│   │   ├── 知识库架构说明.md
│   │   └── knowledge/              # 业务知识库
│   ├── hooks/                      # 自动化钩子
│   │   └── hooks.json              # Hook 配置
│   ├── mcp-configs/                # MCP 服务器配置
│   │   └── mcp-servers.json        # MCP 配置
│   ├── .claude-skills-config.json  # [重要] Skills 注册与自动加载配置
│   ├── CLAUDE.md                   # 完整项目配置参考
│   └── README.md                   # 项目自述
├── src/                            # 源代码
├── pom.xml                         # Maven 配置
├── README.md                       # 项目说明
└── .gitignore                      # Git 忽略
```

---

## Git 配置

### 方案 1：不提交到仓库（个人开发）

```bash
echo ".claude/" >> .gitignore
git add .gitignore
git commit -m "chore: ignore .claude directory"
```

### 方案 2：提交给团队共享（推荐）

```bash
# 首次提交
git add .claude/
git commit -m "feat: 添加 lcyf-claude-code 配置"
git push

# 团队成员初始化
git clone <your-repo>
# .claude 目录已包含，直接使用（无需额外安装）
```

---

## 多仓库聚合项目的安装

如果你是**模块化单体 + 多仓库聚合**的项目结构：

```bash
# 在项目根目录安装
cd /path/to/lcyf-project
git clone https://github.com/a623556943/lcyf-claude-code.git .claude

# 然后进入各子仓库开发
cd lcyf-module-system
# 这里会自动使用 ../.claude/ 配置

cd ../lcyf-module-finance
# 这里也会自动使用 ../.claude/ 配置
```

---

## 常见问题

### Q: 命令不生效？

1. 检查 `.claude/` 目录是否正确存在
2. 重启 Claude Code CLI
3. 确保 `.claude/commands/` 目录有对应的命令文件

### Q: 如何更新到最新版本？

```bash
cd .claude
git pull
```

### Q: 可以在多个项目中使用吗？

**可以**。在每个项目目录下执行上述安装步骤。

**不同的做法**:
- **单个项目**: 在项目根目录安装一次 `.claude/`
- **多个项目**: 每个项目都可以有自己的 `.claude/` 配置
- **多仓库聚合**: 在总仓库根目录安装一次，所有子仓库共享配置

### Q: 知识库存储在哪里？

在项目的 `docs/knowledge/` 目录（自动创建）。

### Q: 可以自定义规范吗？

**可以**。编辑 `.claude/rules/` 下的文件：

```bash
# 编辑 Java 规范
vim .claude/rules/01-Java开发规范.md

# 项目级规范优先级 > 全局规范
```

### Q: Skills 没有自动加载？

1. 检查 `.claude-skills-config.json` 中的触发词配置
2. 查看 [05-Skills加载工作流](../rules/05-Skills加载工作流.md)
3. 尝试显式调用: `/lcyf-java-developer /system-auth-user 任务描述`

### Q: 如何卸载？

```bash
rm -rf .claude/
git add -A
git commit -m "chore: remove lcyf-claude-code configuration"
```

---

## 下一步

- [快速开始](快速开始.md) - 3 步快速上手
- [项目级配置说明](项目级配置说明.md) - 配置详解
- [CLAUDE.md](../CLAUDE.md) - 完整参考
- [规则文档](../rules/) - 编码规范
