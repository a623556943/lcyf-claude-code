# 快速开始

## 3 步上手

### 1. 进入项目目录

```bash
cd /path/to/your/java/project
```

### 2. 克隆配置到 .claude 目录

```bash
git clone https://github.com/a623556943/lcyf-claude-code.git .claude
```

### 3. 开始使用

最推荐的方式是使用自动化工作流，一命搞定从需求到开发：

```bash
# 自动化工作流：需求分析 → 规划 → 开发（推荐）
/lcyf-auto 添加用户导出功能

# 或分步骤：
/lcyf-plan 添加用户导出功能        # 需求规划和实施方案
/lcyf-java-developer 实现用户导出   # 具体开发实现
```

---

## 项目目录结构

安装后的项目结构：

```
your-project/
├── .claude/                    # lcyf-claude-code 配置目录
│   ├── agents/                 # Agent 定义
│   ├── commands/               # 自定义命令
│   ├── rules/                  # 编码规范
│   ├── skills/                 # 业务领域技能（80+ 个）
│   ├── docs/                   # 文档
│   ├── hooks/                  # 自动化钩子
│   ├── mcp-configs/            # MCP 配置
│   ├── .claude-skills-config.json  # Skills 注册配置
│   └── CLAUDE.md               # 主配置文件
├── src/
├── pom.xml
└── .gitignore
```

---

## 常用命令

### 1. 自动化工作流（推荐）

```bash
/lcyf-auto <任务描述>
```

完整的工作流：需求分析 → 规划 → 开发 → 测试 → 代码审查

**示例**：
```bash
/lcyf-auto 为财务模块添加费率等级管理功能

# 系统会自动：
# 1. 理解需求
# 2. 使用 planner agent 制定规划
# 3. 使用 java-developer agent 实现代码
# 4. 使用 code-reviewer agent 审查代码
# 5. 自动加载 /finance-rate-level skill
```

### 2. 独立规划命令

```bash
/lcyf-plan <任务描述>
```

用于复杂任务的需求规划和风险评估

**示例**：
```bash
/lcyf-plan 重构用户认证系统
```

### 3. 独立开发命令

```bash
/lcyf-java-developer <任务描述>
```

专注于 Java 功能的开发和测试

**示例**：
```bash
/lcyf-java-developer 实现用户密码重置功能
```

---

## Skills 自动加载机制

### 如何工作

系统会根据任务描述自动识别触发词，加载对应的 skill：

```bash
# 任务描述包含"费率"和"等级" → 自动加载 /finance-rate-level skill
/lcyf-auto 添加费率等级管理功能

# 任务描述包含"用户"和"认证" → 自动加载 /system-auth-user skill
/lcyf-plan 重构用户认证系统
```

### 显式调用 Skill

如果自动识别不工作，可以显式指定 skill：

```bash
/lcyf-java-developer /finance-rate-level 实现新的费率等级
```

### 查看所有可用 Skills

参考 `.claude/` 目录下的 `.claude-skills-config.json` 文件，或查看 [Skills 完整列表](./../skills/)

---

## 项目特性

### 多仓库聚合环境

本项目是**模块化单体** + **多仓库聚合**的方案。每个子模块都是独立的 Git 仓库：

```
lcyf-claude-code/
├── lcyf-module-base/           # 所有模块 API 层（统一维护）
├── lcyf-module-system/         # 系统模块（独立仓库）
├── lcyf-module-finance/        # 财务模块（独立仓库）
├── lcyf-module-policy/         # 保单模块（独立仓库）
├── lcyf-module-product-*       # 产品模块系列（各自独立）
└── lcyf-server-*               # 服务入口（各自独立）
```

**注意**: 执行 Maven 命令时，需要进入对应的子仓库目录。

### Hooks 自动化

编辑 Java 文件或修改构建文件时，hooks 会自动：
- 提醒使用 slf4j 而不是 System.out.println
- 检查 pom.xml 版本管理
- 提醒构建检查

详见 `hooks/hooks.json`

---

## 工作流程示例

### 完整的功能开发流程

```bash
# 1. 需求分析和规划
/lcyf-auto 为系统添加用户批量导出功能

# 2. 系统会自动：
# - 理解需求（触发词: "用户"、"导出"）
# - 加载 /system-auth-user skill
# - 规划实现方案
# - 生成代码
# - 执行代码审查

# 3. 查看生成的代码
# - 检查 lcyf-module-system/lcyf-module-system-adapter/src/.../controller/
# - 检查 lcyf-module-system/lcyf-module-system-biz/src/.../service/

# 4. 提交代码
git add .
git commit -m "feat(system): 添加用户批量导出功能"
git push
```

---

## 常见问题

### Q: 命令不生效？

检查 `.claude/` 目录是否存在：

```bash
ls .claude/
# 应该看到: agents/ commands/ rules/ skills/ docs/ hooks/ mcp-configs/ ...
```

### Q: 如何更新到最新版本？

```bash
cd .claude
git pull
```

### Q: 可以在多个项目中使用吗？

可以。在每个项目目录下执行安装步骤即可。每个项目都有独立的 `.claude/` 配置。

### Q: Skills 没有自动加载？

1. 检查触发词是否在 `.claude-skills-config.json` 中定义
2. 尝试显式指定 skill: `/lcyf-java-developer /system-auth-user 实现功能`
3. 查看 [05-Skills加载工作流](../rules/05-Skills加载工作流.md) 获取详细说明

### Q: 如何自定义规范？

在 `.claude/rules/` 下修改规则文件：

```bash
vim .claude/rules/01-Java开发规范.md
```

项目级规范优先级 > 全局规范。

---

## 下一步

- [安装指南](安装指南.md) - 详细安装说明
- [项目级配置说明](项目级配置说明.md) - 多项目配置
- [CLAUDE.md](../CLAUDE.md) - 完整项目配置
- [规则文档](../rules/) - 编码规范详解
