# 快速开始

## 5分钟上手

> **项目级配置**: 仅在当前项目中使用，不影响全局配置。

### 方案选择

选择最适合您的方式：

| 方案 | 说明 | 适用场景 |
|------|------|---------|
| **方案A: 子模块** | 将 lcyf-claude-code 作为 Git 子模块 | 想要自动同步更新 |
| **方案B: 快速复制** | 复制配置文件到项目 | 快速独立使用 |
| **方案C: 符号链接** | 创建符号链接（macOS/Linux） | 想要共享配置 |

---

## 方案A: 使用 Git 子模块（推荐）

### 1. 添加子模块

```bash
cd /path/to/your/java/project

# 添加 lcyf-claude-code 作为子模块
git submodule add https://github.com/a623556943/lcyf-claude-code.git .claude/lcyf-claude-code

# 初始化子模块
git submodule update --init --recursive
```

### 2. 创建符号链接（指向子模块中的配置）

**Windows (PowerShell - 需要管理员权限):**
```powershell
$projectPath = Get-Location
$lcyfPath = Join-Path $projectPath ".claude\lcyf-claude-code"

# 创建符号链接
New-Item -ItemType SymbolicLink -Path ".\.claude\agents" -Target "$lcyfPath\agents" -Force
New-Item -ItemType SymbolicLink -Path ".\.claude\commands" -Target "$lcyfPath\commands" -Force
New-Item -ItemType SymbolicLink -Path ".\.claude\skills" -Target "$lcyfPath\skills" -Force
New-Item -ItemType SymbolicLink -Path ".\.claude\rules" -Target "$lcyfPath\rules" -Force
New-Item -ItemType SymbolicLink -Path ".\.claude\templates" -Target "$lcyfPath\templates" -Force
```

**Windows (CMD - 需要管理员权限):**
```cmd
set LCYF_PATH=.\.claude\lcyf-claude-code

mklink /D .\.claude\agents %LCYF_PATH%\agents
mklink /D .\.claude\commands %LCYF_PATH%\commands
mklink /D .\.claude\skills %LCYF_PATH%\skills
mklink /D .\.claude\rules %LCYF_PATH%\rules
mklink /D .\.claude\templates %LCYF_PATH%\templates
```

**macOS/Linux:**
```bash
LCYF_PATH="./.claude/lcyf-claude-code"

ln -s "$LCYF_PATH/agents" "./.claude/agents"
ln -s "$LCYF_PATH/commands" "./.claude/commands"
ln -s "$LCYF_PATH/skills" "./.claude/skills"
ln -s "$LCYF_PATH/rules" "./.claude/rules"
ln -s "$LCYF_PATH/templates" "./.claude/templates"
```

### 3. 初始化项目配置

```bash
# 创建知识库目录
mkdir -p .claude/learned-patterns
mkdir -p .claude/team-conventions
mkdir -p .claude/instincts

# 创建项目配置文件
cat > .claude/config.json << 'EOF'
{
  "projectName": "your-project-name",
  "moduleName": "system",
  "language": "zh_CN",
  "architecture": "lcyf-cloud",
  "techStack": {
    "java": "21",
    "springBoot": "3.5.x",
    "myBatisPlus": "3.5.x",
    "dubbo": "3.3.3"
  }
}
EOF
```

### 4. 开始使用

```bash
# 在 Claude Code 中打开项目根目录
claude-code .

# 输入命令
/lcyf-新功能 添加用户导出功能
```

### 更新配置

```bash
# 更新子模块到最新版本
git submodule update --remote
```

---

## 方案B: 快速复制（不需要 Git 子模块）

### 1. 克隆 lcyf-claude-code

```bash
# 临时克隆到本地
git clone https://github.com/a623556943/lcyf-claude-code.git /tmp/lcyf-claude-code
cd /path/to/your/java/project
```

### 2. 复制配置文件

**Windows (PowerShell):**
```powershell
$source = "C:\tmp\lcyf-claude-code"  # 调整路径
$target = ".\.claude"

# 创建 .claude 目录
New-Item -ItemType Directory -Path $target -Force

# 复制配置文件
Copy-Item -Recurse -Force "$source\agents" "$target\"
Copy-Item -Recurse -Force "$source\commands" "$target\"
Copy-Item -Recurse -Force "$source\skills" "$target\"
Copy-Item -Recurse -Force "$source\rules" "$target\"
Copy-Item -Recurse -Force "$source\templates" "$target\"
```

**Windows (CMD):**
```cmd
set SOURCE=C:\tmp\lcyf-claude-code
set TARGET=.\.claude

mkdir %TARGET%
xcopy /E /I /Y %SOURCE%\agents %TARGET%\agents
xcopy /E /I /Y %SOURCE%\commands %TARGET%\commands
xcopy /E /I /Y %SOURCE%\skills %TARGET%\skills
xcopy /E /I /Y %SOURCE%\rules %TARGET%\rules
xcopy /E /I /Y %SOURCE%\templates %TARGET%\templates
```

**macOS/Linux:**
```bash
source="/tmp/lcyf-claude-code"
target="./.claude"

mkdir -p $target
cp -r "$source/agents" "$target/"
cp -r "$source/commands" "$target/"
cp -r "$source/skills" "$target/"
cp -r "$source/rules" "$target/"
cp -r "$source/templates" "$target/"
```

### 3. 创建知识库目录

```bash
mkdir -p .claude/learned-patterns
mkdir -p .claude/team-conventions
mkdir -p .claude/instincts
```

### 4. 创建项目配置

```bash
cat > .claude/config.json << 'EOF'
{
  "projectName": "your-project-name",
  "moduleName": "system",
  "language": "zh_CN",
  "architecture": "lcyf-cloud",
  "techStack": {
    "java": "21",
    "springBoot": "3.5.x",
    "myBatisPlus": "3.5.x",
    "dubbo": "3.3.3"
  }
}
EOF
```

### 5. 开始使用

```bash
# 在 Claude Code 中打开项目
claude-code .

# 输入命令
/lcyf-新功能 添加用户导出功能
```

### 更新配置

```bash
# 手动更新：重新克隆 lcyf-claude-code，复制最新文件覆盖
```

---

## 方案C: 符号链接（macOS/Linux 仅 - 不克隆仓库）

如果已经在全局安装过 lcyf-claude-code（在 `~/.claude/` 中），可以创建符号链接：

```bash
cd /path/to/your/java/project

# 创建 .claude 目录
mkdir -p .claude

# 创建符号链接到全局配置
ln -s ~/.claude/agents .claude/agents
ln -s ~/.claude/commands .claude/commands
ln -s ~/.claude/skills .claude/skills
ln -s ~/.claude/rules .claude/rules
ln -s ~/.claude/templates .claude/templates

# 创建项目级配置
mkdir -p .claude/learned-patterns
mkdir -p .claude/team-conventions
mkdir -p .claude/instincts
```

---

## 项目级配置文件

### 目录结构

```
your-project/
├── .claude/                         # 项目级配置（新增）
│   ├── agents/                      # Agent 定义
│   ├── commands/                    # 自定义命令
│   ├── rules/                       # 编码规范
│   ├── skills/                      # 技能模块
│   ├── templates/                   # 代码模板
│   │   └── java/
│   │       ├── adapter/
│   │       ├── biz/
│   │       └── api/
│   ├── config.json                  # 项目配置
│   ├── learned-patterns/            # 学到的模式
│   ├── team-conventions/            # 团队约定
│   └── instincts/                   # 本能规则
├── src/
│   └── main/java/
├── pom.xml
└── .gitignore
```

### 添加到 .gitignore

```bash
# 仅提交代码和规范，不提交学习结果
.claude/learned-patterns/*
.claude/team-conventions/*
.claude/instincts/*

# 或者完全忽略
# .claude/
```

---

## 项目级配置示例

**`.claude/config.json`:**
```json
{
  "projectName": "lcyf-system",
  "moduleName": "system",
  "language": "zh_CN",
  "architecture": "lcyf-cloud",
  "techStack": {
    "java": "21",
    "springBoot": "3.5.x",
    "myBatisPlus": "3.5.x",
    "dubbo": "3.3.3",
    "mysql": "8.x",
    "redis": "7.x"
  },
  "team": {
    "name": "开发团队",
    "conventions": {
      "packagePrefix": "com.lcyf.cloud.module",
      "dateFormat": "yyyy-MM-dd HH:mm:ss"
    }
  }
}
```

---

## 常用命令

### 功能开发

| 命令 | 说明 |
|------|------|
| `/lcyf-新功能 <描述>` | 完整的新功能开发流程 |
| `/lcyf-tdd <描述>` | 测试驱动开发 |
| `/lcyf-构建修复` | 修复编译错误 |

### 代码审查

| 命令 | 说明 |
|------|------|
| `/lcyf-代码审查` | 全面代码审查 |
| `/lcyf-安全扫描` | 安全漏洞检测 |
| `/lcyf-API审查` | API设计审查 |

### 验证检查

| 命令 | 说明 |
|------|------|
| `/lcyf-验证` | 全面验证 |
| `/lcyf-验证 quick` | 快速验证 |

---

## 典型工作流程

### 开发新功能

```bash
# 1. 打开项目
claude-code .

# 2. 输入命令
/lcyf-新功能 添加用户批量导入功能

# 自动执行:
# ├── 需求分析 (规划专家)
# ├── 架构设计 (架构专家)
# ├── TDD开发 (测试专家 + Java开发专家)
# ├── 代码审查 (代码审查专家)
# ├── 安全扫描 (安全审查专家)
# └── 知识沉淀 (学习代理)
```

---

## 项目共享

### 团队成员初始化

```bash
# 1. 克隆项目
git clone https://github.com/your-org/your-project.git
cd your-project

# 2. 初始化子模块（如果使用方案A）
git submodule update --init --recursive

# 3. 创建符号链接（如果使用方案A）
# Windows (PowerShell - 管理员)
New-Item -ItemType SymbolicLink -Path ".\.claude\agents" -Target ".\.claude\lcyf-claude-code\agents"
# ... 其他符号链接

# macOS/Linux
ln -s "./.claude/lcyf-claude-code/agents" "./.claude/agents"
# ... 其他符号链接

# 4. 开始使用
claude-code .
```

---

## 下一步

- 查看 [安装指南](安装指南.md) 了解详细选项
- 阅读 [CLI使用指南](CLI使用指南.md) 了解完整命令
- 查看 [模板变量格式规范](模板变量格式规范.md) 自定义模板

---

## 常见问题

### Q: 命令不生效？

确保项目配置正确：
```bash
# 检查目录结构
ls -la .claude/

# 应该包含：
# agents/
# commands/
# rules/
# skills/
# templates/
# config.json
```

### Q: 如何在多个项目中使用？

**选项1：复制配置到每个项目**
```bash
# 对每个项目执行方案B
```

**选项2：使用 Git 子模块（共享更新）**
```bash
# 对每个项目执行方案A
```

### Q: 如何自定义规范？

```bash
# 项目级规范覆盖全局规范
# 创建项目特定的规范文件：
.claude/rules/06-Java编码规范.md

# 项目级规范优先级更高
```

### Q: 如何提交到 Git？

```bash
# 提交配置（推荐）
git add .claude/

# 或忽略学习结果
cat >> .gitignore << 'EOF'
.claude/learned-patterns/*
.claude/team-conventions/*
.claude/instincts/*
EOF

git add .claude/ .gitignore
git commit -m "feat: 添加项目级 Claude Code 配置"
```

### Q: 如何更新配置？

**如果使用方案A（子模块）：**
```bash
# 更新到最新版本
git submodule update --remote

# 或进入子模块更新
cd .claude/lcyf-claude-code
git pull origin master
cd ../..
```

**如果使用方案B（复制）：**
```bash
# 重新克隆和复制
```

---

## 项目级 vs 全局配置对比

| 功能 | 项目级 | 全局配置 |
|------|--------|---------|
| 独立使用 | ✅ | ✅ |
| 团队共享 | ✅ | ❌ |
| 版本控制 | ✅ | ❌ |
| 自定义规范 | ✅ | ✅ |
| 学习结果隔离 | ✅ | ❌ |
| 多项目管理 | ✅ | ❌ |

---

**推荐：使用方案A (Git 子模块) 以获得最佳的更新体验和团队共享能力！**
