---
name: workflows
description: 提供标准化的开发工作流程，确保团队遵循一致的开发流程。当执行 /lcyf-new-feature、/lcyf-auto 命令或需要协调多个 agent 时激活。
---

# 工作流技能

## 概述

提供标准化的开发工作流程，确保团队遵循一致的开发流程。

## 核心工作流

### 1. 新功能开发流程

```
需求分析 → 架构设计 → TDD开发 → 代码审查 → 安全扫描 → 知识沉淀
```

#### 详细步骤

```markdown
## 阶段1: 需求分析
- 理解用户需求
- 明确功能边界
- 识别依赖关系

## 阶段2: 架构设计
- 确定技术方案
- 设计API接口
- 规划数据模型

## 阶段3: TDD开发
- 编写测试用例（红灯）
- 实现功能代码（绿灯）
- 重构优化（改进）

## 阶段4: 代码审查
- 代码规范检查
- 逻辑正确性验证
- 性能问题识别

## 阶段5: 安全扫描
- OWASP Top 10检查
- 敏感信息检测
- 依赖漏洞扫描

## 阶段6: 知识沉淀
- 提取可复用模式
- 记录问题解决方案
- 更新团队知识库
```

### 2. Bug修复流程

```
问题分析 → 编写失败测试 → 修复代码 → 验证通过 → 代码审查
```

#### 详细步骤

```markdown
## 步骤1: 问题分析
- 复现问题
- 分析根本原因
- 确定影响范围

## 步骤2: 编写失败测试
- 创建测试用例复现bug
- 确保测试失败

## 步骤3: 修复代码
- 实现最小修复
- 避免引入新问题

## 步骤4: 验证通过
- 运行修复后的测试
- 运行回归测试

## 步骤5: 代码审查
- 检查修复是否正确
- 检查是否有遗漏
```

### 3. 代码审查流程

```
自动化检查 → 规范检查 → 逻辑审查 → 安全检查 → 生成报告
```

### 4. 发布流程

```
创建发布分支 → 版本更新 → 全面测试 → 合并到main → 打标签
```

## Agent 协作矩阵

| 工作流 | 参与Agent | 协作方式 |
|--------|-----------|----------|
| 新功能开发 | planner → architect → java-developer → tdd-guide → code-reviewer → security-reviewer | 串行 |
| Bug修复 | tdd-guide → java-developer → code-reviewer | 串行 |
| 代码审查 | code-reviewer + security-reviewer | 并行 |
| 安全扫描 | security-reviewer | 单独 |

## 质量门禁

### 提交前检查

- [ ] 构建通过
- [ ] 测试通过
- [ ] 覆盖率≥80%
- [ ] 无严重安全问题
- [ ] 代码规范检查通过

### PR合并条件

- [ ] 至少1人审查通过
- [ ] CI检查全部通过
- [ ] 无未解决的评论
- [ ] 文档已更新

## 检查点管理

### 推荐检查点

| 阶段 | 检查点名称 | 验证内容 |
|------|-----------|----------|
| 功能开始 | "功能开始" | 基线状态 |
| 核心完成 | "核心完成" | 核心逻辑验证 |
| 重构完成 | "重构完成" | 代码质量验证 |
| 测试完成 | "测试完成" | 覆盖率验证 |

## 关联命令

- `/lcyf-new-feature` - 执行新功能开发流程
- `/lcyf-verify` - 执行验证流程
- `/lcyf-code-review` - 执行审查流程
- `/lcyf-checkpoint` - 创建检查点
